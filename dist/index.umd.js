/**
* name: jb-utils
* version 1.1.1
* description: jb-utils前端常用方法库
* author: ecitlm
* website: https://ecitlm.github.io/JB-Utils/index.html
* Date: 2021-12-21
**/

!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).webUtils={})}(this,(function(e){"use strict";function r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(o,r))}))}return e}var a={phone:/^1[3|4|5|7|8][0-9]{9}$/,email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,tel:/^(0\d{2,3}-\d{7,8})(-\d{1,4})?$/,number:/^[0-9]$/,chinese:/^[\u4E00-\u9FA5]+$/,english:/^[a-zA-Z]+$/,lower:/^[a-z]+$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,idCard:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/};function i(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,r,t){return r&&i(e.prototype,r),t&&i(e,t),e}var f=function(){function e(){t(this,e),window&&window.localStorage&&(this.readStorage=window.localStorage)}return u(e,[{key:"bootStrap",value:function(e){switch(e.mode){case"session":this.readStorage=window.sessionStorage;break;case"local":this.readStorage=window.localStorage;break;default:throw new Error("arguments is wrong,please check config {}")}this.config=e}},{key:"setItem",value:function(e,r){if(2!==arguments.length)throw new Error("args must be two");try{this.readStorage.setItem(e,JSON.stringify(r))}catch(e){throw new Error("value is not a JSON.stringify val，please check data value")}}},{key:"getItem",value:function(e){var r=JSON.parse(this.readStorage.getItem(e));return(null==r?void 0:r.data)||null}},{key:"removeItem",value:function(e){this.readStorage.removeItem(e)}},{key:"clear",value:function(){this.readStorage.clear()}}]),e}();function c(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return c(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=function(){function e(){t(this,e)}return u(e,[{key:"add",value:function(){for(var e=0,r=[],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];for(var a=0,i=n;a<i.length;a++){var u=i[a];r.push.apply(r,l(String(u).split(".")))}for(var f=r.map((function(e){return e.length})),c=Math.max.apply(Math,l(f)),d=0;d<n.length;d++)e+=Math.round(n[d]*Math.pow(10,c));return e/Math.pow(10,c)}},{key:"sub",value:function(){for(var e=0,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];for(var o=0|t[0],a=0;a<t.length;a++){var i=t[a].toString(),u=i.indexOf("."),f=0;u>-1&&(e=(f=i.length-1-u)>e?f:e)}for(var c=0;c<t.length;c++)0===c?o=Math.round(t[c]*Math.pow(10,e)):o-=Math.round(t[c]*Math.pow(10,e));return o/Math.pow(10,e)}},{key:"ride",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n=r[0].toString(),o=r[1].toString(),a=n.indexOf("."),i=o.indexOf("."),u=[0,0];return a>-1&&(u[0]=n.length-1-a),i>-1&&(u[1]=o.length-1-a),Math.round(r[0]*Math.pow(10,u[0])*(r[1]*Math.pow(10,u[1])))/Math.pow(10,u[0]+u[1])}},{key:"exc",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=e.toString(),n=r.toString(),o=t.indexOf("."),a=n.indexOf("."),i=[0,0];return o>-1&&(i[0]=t.length-1-o),a>-1&&(i[1]=n.length-1-o),Math.round(e*Math.pow(10,i[0]))/(Math.round(r*Math.pow(10,i[1]))*Math.pow(10,i[0]-i[1]))}},{key:"toFixed",value:function(e,r){var t=Math.pow(10,r);return(Math.round(e*t)/t).toFixed(r)}}]),e}();e.Calc=d,e.IdCardInfo=function(e){if(!/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/.test(e))throw new Error("id card id is invalid !");var r=e.substring(6,14),t=r.substring(0,4),n=r.substring(4,6),o=r.substring(6,8),a=e.substring(0,2),i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门"}[a],u="";return e.charAt(16)>="0"&&e.charAt(16)<="9"&&(u=parseInt(e.charAt(16))%2==0?1:0),{year:t,month:n,day:o,birthday:"".concat(t,"-").concat(n,"-").concat(o),province:i,provCode:a,sex:u}},e.Storage=f,e.Validator=function e(){var r=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e);var i=o(o({},a),n);Object.keys(i).forEach((function(e){r[e]=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a[e].test(r)}}))},e.arrayToTree=function(e,r){var t={},n=[];e.map((function(e){t[e.id]=e}));for(var o=0,a=e.length;o<a;o++){var i=e[o].parentId;i!==r?t[i].children?t[i].children.push(e[o]):t[i].children=[e[o]]:n.push(e[o])}return n},e.convertCurrency=function(e){var r=["角","分"],t=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],o=e<0?"欠":"";e=Math.abs(e);for(var a="",i=0;i<r.length;i++)a+=(t[Math.floor(10*e*Math.pow(10,i))%10]+r[i]).replace(/零./,"");a=a||"整",e=Math.floor(e);for(var u=0;u<n[0].length&&e>0;u++){for(var f="",c=0;c<n[1].length&&e>0;c++)f=t[e%10]+n[1][c]+f,e=Math.floor(e/10);a=f.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][u]+a}return o+a.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},e.debounce=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,t=null;return function(){for(var n=this,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(n,a)}),r)}},e.formatDate=function(e,r){var t;(e=e||(new Date).valueOf())&&"string"!=typeof e||(e=new Date(e));var n={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString()};for(var o in n)(t=new RegExp("("+o+")").exec(r))&&(r=r.replace(t[1],1===t[1].length?n[o]:n[o].padStart(t[1].length,"0")));return r},e.formatNumber=function(e){if(isNaN(e))throw new TypeError("num is not a number");return(""+e).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},e.getTreeChildren=function(e,r){var t=!1,n=null;return function e(o){Array.isArray(o)&&!t&&o.forEach((function(o){o.id===r?(n=o,t=!0):o.children&&e(o.children)}))}(e),n},e.getUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxx".replace(/[xy]/g,(function(e){var r=16*Math.random()|0;return("x"===e?r:8|r).toString(16)}))},e.parseQueryString=function(e){var r=e.split("?")[1];return r?JSON.parse('{"'+decodeURIComponent(r).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}},e.stringifyQueryString=function(e){if(!e)return"";var r=[];for(var t in e){var n=e[t];if(n instanceof Array)for(var o=0;o<n.length;++o)r.push(encodeURIComponent(t+"["+o+"]")+"="+encodeURIComponent(n[o]));else r.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]))}return r.join("&")},e.throttle=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,t=0;return function(){var n=(new Date).getTime();if(n-t>r){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];e.apply(this,a),t=n}}},e.treeToArray=function e(r,t){var n=[];if(t=t||"children",!Array.isArray(r))throw new Error("arguments must be array");for(var o=0;o<r.length;o++){var a=r[o],i=JSON.parse(JSON.stringify(a));if(delete i[t],n.push(i),a[t]){var u=e(a[t],t);n=n.concat(u)}}return n},e.unique=function(e,r){var t=r||"id",n=new Map;return e.filter((function(e){return!n.has(e[t])&&n.set(e[t],1)}))},e.version="1.1.1",Object.defineProperty(e,"__esModule",{value:!0})}));
