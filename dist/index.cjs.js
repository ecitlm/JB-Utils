/**
* name: jb-utils
* version 1.1.1
* description: jb-utils前端常用方法库
* author: ecitlm
* website: https://ecitlm.github.io/JB-Utils/index.html
* Date: 2021-12-21
**/

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function r(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function t(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function e(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))}))}return t}var o={phone:/^1[3|4|5|7|8][0-9]{9}$/,email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,tel:/^(0\d{2,3}-\d{7,8})(-\d{1,4})?$/,number:/^[0-9]$/,chinese:/^[\u4E00-\u9FA5]+$/,english:/^[a-zA-Z]+$/,lower:/^[a-z]+$/,url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,idCard:/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/};function a(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function i(r,t,e){return t&&a(r.prototype,t),e&&a(r,e),r}var u=function(){function r(){t(this,r),window&&window.localStorage&&(this.readStorage=window.localStorage)}return i(r,[{key:"bootStrap",value:function(r){switch(r.mode){case"session":this.readStorage=window.sessionStorage;break;case"local":this.readStorage=window.localStorage;break;default:throw new Error("arguments is wrong,please check config {}")}this.config=r}},{key:"setItem",value:function(r,t){if(2!==arguments.length)throw new Error("args must be two");try{this.readStorage.setItem(r,JSON.stringify(t))}catch(r){throw new Error("value is not a JSON.stringify val，please check data value")}}},{key:"getItem",value:function(r){var t=JSON.parse(this.readStorage.getItem(r));return(null==t?void 0:t.data)||null}},{key:"removeItem",value:function(r){this.readStorage.removeItem(r)}},{key:"clear",value:function(){this.readStorage.clear()}}]),r}();function c(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function f(r){return function(r){if(Array.isArray(r))return c(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,t){if(r){if("string"==typeof r)return c(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(r,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=function(){function r(){t(this,r)}return i(r,[{key:"add",value:function(){for(var r=0,t=[],e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];for(var a=0,i=n;a<i.length;a++){var u=i[a];t.push.apply(t,f(String(u).split(".")))}for(var c=t.map((function(r){return r.length})),l=Math.max.apply(Math,f(c)),s=0;s<n.length;s++)r+=Math.round(n[s]*Math.pow(10,l));return r/Math.pow(10,l)}},{key:"sub",value:function(){for(var r=0,t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var o=0|e[0],a=0;a<e.length;a++){var i=e[a].toString(),u=i.indexOf("."),c=0;u>-1&&(r=(c=i.length-1-u)>r?c:r)}for(var f=0;f<e.length;f++)0===f?o=Math.round(e[f]*Math.pow(10,r)):o-=Math.round(e[f]*Math.pow(10,r));return o/Math.pow(10,r)}},{key:"ride",value:function(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];var n=t[0].toString(),o=t[1].toString(),a=n.indexOf("."),i=o.indexOf("."),u=[0,0];return a>-1&&(u[0]=n.length-1-a),i>-1&&(u[1]=o.length-1-a),Math.round(t[0]*Math.pow(10,u[0])*(t[1]*Math.pow(10,u[1])))/Math.pow(10,u[0]+u[1])}},{key:"exc",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=r.toString(),n=t.toString(),o=e.indexOf("."),a=n.indexOf("."),i=[0,0];return o>-1&&(i[0]=e.length-1-o),a>-1&&(i[1]=n.length-1-o),Math.round(r*Math.pow(10,i[0]))/(Math.round(t*Math.pow(10,i[1]))*Math.pow(10,i[0]-i[1]))}},{key:"toFixed",value:function(r,t){var e=Math.pow(10,t);return(Math.round(r*e)/e).toFixed(t)}}]),r}();exports.Calc=l,exports.IdCardInfo=function(r){if(!/^[1-9]\d{5}(?:18|19|20)\d{2}(?:0[1-9]|10|11|12)(?:0[1-9]|[1-2]\d|30|31)\d{3}[\dXx]$/.test(r))throw new Error("id card id is invalid !");var t=r.substring(6,14),e=t.substring(0,4),n=t.substring(4,6),o=t.substring(6,8),a=r.substring(0,2),i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门"}[a],u="";return r.charAt(16)>="0"&&r.charAt(16)<="9"&&(u=parseInt(r.charAt(16))%2==0?1:0),{year:e,month:n,day:o,birthday:"".concat(e,"-").concat(n,"-").concat(o),province:i,provCode:a,sex:u}},exports.Storage=u,exports.Validator=function r(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,r);var i=n(n({},o),a);Object.keys(i).forEach((function(r){e[r]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o[r].test(t)}}))},exports.arrayToTree=function(r,t){var e={},n=[];r.map((function(r){e[r.id]=r}));for(var o=0,a=r.length;o<a;o++){var i=r[o].parentId;i!==t?e[i].children?e[i].children.push(r[o]):e[i].children=[r[o]]:n.push(r[o])}return n},exports.convertCurrency=function(r){var t=["角","分"],e=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],o=r<0?"欠":"";r=Math.abs(r);for(var a="",i=0;i<t.length;i++)a+=(e[Math.floor(10*r*Math.pow(10,i))%10]+t[i]).replace(/零./,"");a=a||"整",r=Math.floor(r);for(var u=0;u<n[0].length&&r>0;u++){for(var c="",f=0;f<n[1].length&&r>0;f++)c=e[r%10]+n[1][f]+c,r=Math.floor(r/10);a=c.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][u]+a}return o+a.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},exports.debounce=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,e=null;return function(){for(var n=this,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];e&&clearTimeout(e),e=setTimeout((function(){e=null,r.apply(n,a)}),t)}},exports.formatDate=function(r,t){var e;(r=r||(new Date).valueOf())&&"string"!=typeof r||(r=new Date(r));var n={"Y+":r.getFullYear().toString(),"m+":(r.getMonth()+1).toString(),"d+":r.getDate().toString(),"H+":r.getHours().toString(),"M+":r.getMinutes().toString(),"S+":r.getSeconds().toString()};for(var o in n)(e=new RegExp("("+o+")").exec(t))&&(t=t.replace(e[1],1===e[1].length?n[o]:n[o].padStart(e[1].length,"0")));return t},exports.formatNumber=function(r){if(isNaN(r))throw new TypeError("num is not a number");return(""+r).replace(/(\d{1,3})(?=(\d{3})+(?:$|\.))/g,"$1,")},exports.getTreeChildren=function(r,t){var e=!1,n=null;return function r(o){Array.isArray(o)&&!e&&o.forEach((function(o){o.id===t?(n=o,e=!0):o.children&&r(o.children)}))}(r),n},exports.getUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxx".replace(/[xy]/g,(function(r){var t=16*Math.random()|0;return("x"===r?t:8|t).toString(16)}))},exports.parseQueryString=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.href,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=r.split("?")[1]||"";if(!e)return{};for(var n=e.split("&"),o={},a=0;a<n.length;){var i=n[a].split("=");o[i[0]]=i[1]?decodeURI(i[1]):"",a++}return t?o[t]:o},exports.stringifyQueryString=function(r){if(!r)return"";var t=[];for(var e in r){var n=r[e];if(n instanceof Array)for(var o=0;o<n.length;++o)t.push(encodeURIComponent(e+"["+o+"]")+"="+encodeURIComponent(n[o]));else t.push(encodeURIComponent(e)+"="+encodeURIComponent(r[e]))}return t.join("&")},exports.throttle=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,e=0;return function(){var n=(new Date).getTime();if(n-e>t){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];r.apply(this,a),e=n}}},exports.treeToArray=function r(t,e){var n=[];if(e=e||"children",!Array.isArray(t))throw new Error("arguments must be array");for(var o=0;o<t.length;o++){var a=t[o],i=JSON.parse(JSON.stringify(a));if(delete i[e],n.push(i),a[e]){var u=r(a[e],e);n=n.concat(u)}}return n},exports.unique=function(r,t){var e=t||"id",n=new Map;return r.filter((function(r){return!n.has(r[e])&&n.set(r[e],1)}))},exports.version="1.1.1";
